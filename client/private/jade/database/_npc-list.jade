// Copyright (c) 2014 DemonSquid, Inc. All rights reserved.

// TODO: adapt this
.form-inline.form-group(ng-show="refreshingNpcs || npcs")
    .col-xs-12
        label(for='npc-sort') Sort by:&nbsp;
        select.form-control#npc-sort(ng-model='sortBy')
            option(value='name') Name
            option(value='cr') Challenge Rating


table.npcs.table.table-striped(ng-show="refreshingNpcs || npcs")
    thead
        tr.result-row
            th Name
            th CR
            th(colspan='3') Source
    tbody
        tr.is-pointer.npc-row(ng-repeat='npc in npcs')
            td.name-container(ng-class='{selected: selectedNpcId && (selectedNpcId === npc.id|| selectedNpcId === npc._id)}', ng-click='selectNpc((npc.id||npc._id))')
                span {{npc.Name}}
            td.price-container(ng-class='{selected: selectedNpcId && (selectedNpcId === npc.id|| selectedNpcId === npc._id)}', ng-click='selectNpc((npc.id||npc._id))')
                span {{npc.CR | numberToFractionString}}
            td.src-container(ng-class='{selected: selectedNpcId && (selectedNpcId === npc.id|| selectedNpcId === npc._id)}', ng-click='selectNpc((npc.id||npc._id))')
                abbr(title='{{npc.Source}}')
                    small {{npc.Source | abbreviateSource}}
            //td.input-container(ng-class='{selected: selectedNpcId && (selectedNpcId === npc.id|| selectedNpcId === npc._id)}')
                input(type='text', placeholder='1', ng-model='npc.amountToAdd')
            td.btn-container.text-right(ng-class='{selected: selectedNpcId && (selectedNpcId === npc.id|| selectedNpcId === npc._id)}')
                // FIXME should be disabled sometimes
                button.add-item-btn(ng-click='addNpc(npc)')
                    i.icon.icon-plus
                        | +

p.text-center(ng-hide="refreshingNpcs || npcs")
    | No NPCs found.

.text-center(ng-show="refreshingNpcs || npcs")
    pagination.pagination-sm.page.is-pointer(boundary-links='true', total-items='totalItems', page='currentPage', items-per-page='itemsPerPage', max-size='maxSize', previous-text='‹', next-text='›', first-text='«', last-text='»')