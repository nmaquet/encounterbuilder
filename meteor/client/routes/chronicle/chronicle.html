<!-- Copyright (c) 2014 DemonSquid, Inc. All rights reserved. -->

<template name="chronicle">
    <div class="container">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h1>
                    <span>{{chronicle.name}}</span>
                    <span class="badge">by {{usernameFor chronicle.ownerId}}</span>
                    <span class="badge">{{chronicle.privacy}}</span>
                    <div class="btn-group pull-right">
                        <button id="collapse-button" type="button" class="btn btn-default {{activeClassIfCollapsed}}" data-toggle="button">
                            <i class="glyphicon glyphicon-list"></i>
                        </button>
                        <button id="expand-button" type="button" class="btn btn-default {{activeClassIfExpanded}}" data-toggle="button">
                            <i class="glyphicon glyphicon-th-large"></i>
                        </button>
                        {{#if allowedToEdit}}
                            <button type="button" id="edit-button" class="btn btn-default">
                                <i class="glyphicon glyphicon-edit"></i>
                            </button>
                            <button type="button" id="delete-button" class="btn btn-danger">
                                <i class="glyphicon glyphicon-remove"></i>
                            </button>
                        {{/if}}
                    </div>
                </h1>
            </div>
            <!--<div class="panel-body">-->
                <!--TODO-->
            <!--</div>-->
        </div>
        {{> chronicleElementList}}
    </div>
</template>

<template name="chronicleElementList">
    <div id="chronicle-element-list">
        {{#each chronicleElements}}
        <div class="panel panel-default">
            {{#if isText}}
                {{> chronicleText}}
            {{/if}}
            {{#if isMonster}}
                {{> chronicleMonster}}
            {{/if}}
            {{#if isEncounter}}
                {{> chronicleEncounter}}
            {{/if}}
            {{#if isHeading}}
                {{> chronicleHeading}}
            {{/if}}
        </div>
        {{/each}}
    </div>
</template>

<template name="chronicleText">
    {{#if expanded}}
        <div class="panel-heading">
            <h2>
                <i class="glyphicon glyphicon-pencil" style="margin-right:10px;"></i>
                {{content.title}}
            </h2>
        </div>
        <div class="panel-body">
            <p>{{content.body}}</p>
        </div>
    {{else}}
        <div class="panel-heading">
            <h4>
                <i class="glyphicon glyphicon-pencil" style="margin-right:10px;"></i>
                {{content.title}}
            </h4>
        </div>
    {{/if}}
</template>

<template name="chronicleHeading">
    {{#if expanded}}
        <div class="panel-heading">
            <h2>
                <i class="glyphicon glyphicon-folder-open" style="margin-right:10px;"></i>
                <span>{{content.title}}</span>
            </h2>
        </div>
    {{else}}
        <div class="panel-heading">
            <h4>
                <i class="glyphicon glyphicon-folder-open" style="margin-right:10px;"></i>
                <span>{{content.title}}</span>
            </h4>
        </div>
    {{/if}}
</template>

<template name="chronicleMonster">
    {{#if expanded}}
        <div class="panel-heading">
            <h2>
                <i class="glyphicon glyphicon-eye-open" style="margin-right:10px;"></i>
                {{content.Name}}
            </h2>
        </div>
        <div class="panel-body">
            {{#with content}}
                {{> monsterStatBlock}}
            {{/with}}
        </div>
    {{else}}
        <div class="panel-heading">
            <h4>
                <i class="glyphicon glyphicon-eye-open" style="margin-right:10px;"></i>
                {{content.Name}}
            </h4>
        </div>
    {{/if}}
</template>

<template name="chronicleEncounter">
    {{#if expanded}}
        <div class="panel-heading">
            <h2>
                <i class="glyphicon glyphicon-fire" style="margin-right:10px;"></i>
                {{content.name}}
            </h2>
        </div>
        <div class="panel-body">
            <h3>Monsters</h3>
            <ul>
                {{#each elements}}
                    <li>{{count}} {{monster.Name}}</li>
                {{/each}}
            </ul>
            <h3>NPCs</h3>
            <h3>Items</h3>
        </div>
    {{else}}
        <div class="panel-heading">
            <h4>
                <i class="glyphicon glyphicon-fire" style="margin-right:10px;"></i>
                {{content.name}}
            </h4>
        </div>
    {{/if}}
</template>