<!--Copyright (c) 2014 DemonSquid, Inc. All rights reserved.-->

<template name="editChronicle">
    <div class="container">
        <h1>Single Chronicle: {{chronicle.name}}
            <button type="button" id="done-button" class="btn btn-primary">done</button>
        </h1>
        {{> addChronicleItemForm}}
        {{> editChronicleItemList}}
    </div>
    {{> addMonsterModal}}
</template>

<template name="editChronicleItemList">
    <div id="edit-chronicle-item-list">
        {{#each chronicleItems}}
            <div class="well edit-chronicle-item">
                {{#if isText}}
                    {{> textEditor}}
                {{/if}}
                {{#if isMonster}}
                    {{> monsterEditor}}
                {{/if}}
                {{#if isEncounter}}
                    {{> encounterEditor}}
                {{/if}}
                <div>
                    <button type="button" class="btn btn-danger delete-user-content-button">delete</button>
                </div>
            </div>
        {{/each}}
    </div>
</template>

<template name="textEditor">
    <div>
        <input class="form-control content-title-input" value="{{content.title}}"/>
    </div>
    <div>
        <textarea rows="4" cols="50" class="form-control content-body-textarea">{{content.body}}</textarea>
    </div>
</template>

<template name="monsterEditor">
    {{#with content}}
        {{> monsterStatBlock}}
    {{/with}}
</template>

<template name="encounterEditor">
    {{> addEncounterItemForm}}
    <div>
        <input class="form-control content-name-input" value="{{content.name}}"/>
    </div>
    <ul>
        {{#each monsters}}
            <li>{{count}} {{monster.Name}}</li>
        {{/each}}
    </ul>
</template>

<template name="addEncounterItemForm">
    <div class="dropdown">
        <button type="button" class="btn btn-primary" data-target="#" data-toggle="dropdown">Add</button>
        <ul class="dropdown-menu">
            <li><a id="add-monster-dropdown-item">Monster</a></li>
            <li><a id="add-npc-dropdown-item">NPC</a></li>
            <li><a id="add-item-dropdown-item">Monster</a></li>
        </ul>
    </div>
</template>

<template name="addChronicleItemForm">
    <div class="dropdown">
        <button type="button" class="btn btn-primary" data-target="#" data-toggle="dropdown">Add</button>
        <ul class="dropdown-menu">
            <li><a id="add-text-dropdown-item">Text</a></li>
            <li><a id="add-monster-dropdown-item">Monster</a></li>
            <li><a id="add-encounter-dropdown-item">Encounter</a></li>
        </ul>
    </div>
</template>

<template name="addMonsterModal">
    <div class="modal fade" id="add-monster-modal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Add Monster</h4>
                </div>
                <div class="modal-body">
                    <form>
                        {{> inputAutocomplete class="form-control" id="add-monster-search-input" name="query" placeholder="Search..." settings=autocompleteSettings }}
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
</template>