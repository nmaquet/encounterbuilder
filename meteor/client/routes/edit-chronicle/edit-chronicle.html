<!--Copyright (c) 2014 DemonSquid, Inc. All rights reserved.-->

<template name="editChronicle">
    <div class="container">
        <div class="row">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h1>
                        <form class="form form-inline">
                            <span>{{chronicle.name}}</span>
                            <span class="badge">by {{usernameFor chronicle.ownerId}}</span>
                            <span class="badge">{{chronicle.privacy}}</span>
                            <div class="pull-right">
                                <div class="btn-group">
                                    <button id="collapse-button" type="button" class="btn btn-default {{activeClassIfCollapsed}}" data-toggle="button">
                                        <i class="glyphicon glyphicon-list"></i>
                                    </button>
                                    <button id="expand-button" type="button" class="btn btn-default {{activeClassIfExpanded}}" data-toggle="button">
                                        <i class="glyphicon glyphicon-th-large"></i>
                                    </button>
                                    <button type="button" id="done-button" class="btn btn-success">
                                        <i class="glyphicon glyphicon-ok"></i>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </h1>
                </div>
                <div class="panel-body">
                    <form role="form">
                        <div class="form-group">
                            <label for="chronicle-name-input">Name:</label>
                            <input type="text" class="form-control" id="chronicle-name-input" value="{{chronicle.name}}">
                        </div>
                        <div class="form-group">
                            <label>Privacy:</label>
                            <div class="radio">
                                <label>
                                    <input type="radio" checked="{{isPrivate}}" name="chronicle-privacy" id="chronicle-privacy-radio-private">
                                    <strong>Private</strong> Nobody else but me can see this chronicle
                                </label>
                            </div>
                            <div class="radio">
                                <label>
                                    <input type="radio" checked="{{isPublic}}" name="chronicle-privacy" id="chronicle-privacy-radio-public">
                                    <strong>Public</strong> Everyone on the internet can see this chronicle
                                </label>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-2 col-xs-offset-5">
                {{> editChronicle_addButton position="top"}}
            </div>
        </div>
        <div class="row">
            <div id="edit-chronicle-element-list">
                {{#each elements}}
                    {{> editChronicle_element}}
                {{/each}}
            </div>
        </div>
        {{#unless isEmpty}}
            <div class="row">
                <div class="col-xs-2 col-xs-offset-5">
                    {{> editChronicle_addButton position="bottom"}}
                </div>
            </div>
        {{/unless}}
    </div>
    {{> editChronicle_addMonsterModal}}
</template>

<template name="editChronicle_addButton">
    <div class="dropdown pull-middle">
        <button type="button" class="btn btn-primary add-button" data-target="#" data-toggle="dropdown">+</button>
        <ul class="dropdown-menu">
            <li><a id="add-heading-dropdown-element">Heading</a></li>
            <li><a id="add-text-dropdown-element">Text</a></li>
            <li><a id="add-monster-dropdown-element">Monster</a></li>
            <li><a id="add-encounter-dropdown-element">Encounter</a></li>
        </ul>
    </div>
</template>

<template name="editChronicle_element">
    <div class="panel panel-default cursor-move {{chronicleElementLevelClass}}">
        {{#if isEdited}}
            {{#if isText}}
                {{> editChronicle_editText}}
            {{/if}}
            {{#if isMonster}}
                {{> editChronicle_editMonster}}
            {{/if}}
            {{#if isEncounter}}
                {{> editChronicle_editEncounter}}
            {{/if}}
            {{#if isHeading}}
                {{> editChronicle_editHeading}}
            {{/if}}
        {{else}}
            {{#if isText}}
                {{> editChronicle_text}}
            {{/if}}
            {{#if isMonster}}
                {{> editChronicle_monster}}
            {{/if}}
            {{#if isEncounter}}
                {{> editChronicle_encounter}}
            {{/if}}
            {{#if isHeading}}
                {{> editChronicle_heading}}
            {{/if}}
        {{/if}}
    </div>
</template>

<template name="editChronicle_editText">
    <div class="panel-heading">
        <form class="form-inline" role="form">
            <div class="form-group">
                <input class="form-control content-title-input" name="title" value="{{content.title}}"/>
            </div>
            <button type="button" class="btn btn-success done-button pull-right"><i class="glyphicon glyphicon-ok"></i></button>
        </form>
    </div>
    <div class="panel-body">
        <textarea rows="4" cols="50" class="form-control content-body-textarea">{{content.body}}</textarea>
    </div>
</template>

<template name="editChronicle_editHeading">
    <div class="panel-heading">
        <h1>
            <i class="glyphicon glyphicon-folder-open" style="margin-right:10px;"></i>
            <span>{{content.title}}</span>
            <span>(Level {{content.level}})</span>
            <button type="button" class="btn btn-success done-button pull-right"><i class="glyphicon glyphicon-ok"></i></button>
        </h1>
    </div>
    <div class="panel-body">
        <form role="form">
            <div class="form-group">
                <label for="chronicle-name-input">Title:</label>
                <input type="text" class="form-control title-input" value="{{content.title}}">
            </div>
        </form>
    </div>
</template>

<template name="editChronicle_editMonster">
    <div class="panel-heading">
        <h2>
            <span>{{content.Name}}</span>
            <button type="button" class="btn btn-success done-button pull-right"><i class="glyphicon glyphicon-ok"></i></button>
        </h2>
    </div>
    <div class="panel-body">
        {{#with content}}
            {{> monsterStatBlock}}
        {{/with}}
    </div>
</template>

<template name="editChronicle_editEncounter">
    <div class="panel-heading">
        <form class="form-inline" role="form">
            <div class="form-group">
                <input class="form-control content-name-input" value="{{content.name}}"/>
            </div>
            <button type="button" class="btn btn-success done-button pull-right"><i class="glyphicon glyphicon-ok"></i></button>
        </form>
    </div>
    <div class="panel-body">
        <h4>
            <button type="button" class="btn btn-default add-monster-button">+</button>
            Monsters
        </h4>
        <ul>
            {{#each elements}}
                <li>
                    <span>{{count}}</span>
                    <span>{{monster.Name}}</span>
                </li>
            {{/each}}
        </ul>
        <h4>
            <button type="button" class="btn btn-default add-npc-button">+</button>
            NPCs
        </h4>
        <h4>
            <button type="button" class="btn btn-default add-item-button">+</button>
            Items
        </h4>
    </div>
</template>

<template name="editChronicle_text">
    {{#if expanded}}
        <div class="panel-heading">
            <h2>
                <i class="glyphicon glyphicon-pencil" style="margin-right:10px;"></i>
                <span>{{content.title}}</span>
                <div class="float-right btn-group">
                    <button type="button" class="btn btn-default edit-button"><i class="glyphicon glyphicon-edit"></i></button>
                    <button type="button" class="btn btn-danger delete-button"><i class="glyphicon glyphicon-remove"></i></button>
                </div>
            </h2>
        </div>
        <div class="panel-body">
            <p>{{content.body}}</p>
        </div>
    {{else}}
        <div class="panel-heading">
            <h4>
                <i class="glyphicon glyphicon-pencil" style="margin-right:10px;"></i>
                <span>{{content.title}}</span>
                <div class="float-right btn-group">
                    <button type="button" class="btn btn-default edit-button"><i class="glyphicon glyphicon-edit"></i></button>
                    <button type="button" class="btn btn-danger delete-button"><i class="glyphicon glyphicon-remove"></i></button>
                </div>
            </h4>
        </div>
    {{/if}}
</template>

<template name="editChronicle_heading">
    {{#if expanded}}
        <div class="panel-heading">
            <h2>
                <i class="glyphicon glyphicon-folder-open" style="margin-right:10px;"></i>
                <span>{{content.title}}</span>
                <span>(Level {{content.level}})</span>
                <div class="float-right btn-group">
                    <button type="button" class="btn btn-default decrease-level-button"><i class="glyphicon glyphicon-arrow-left"></i></button>
                    <button type="button" class="btn btn-default increase-level-button"><i class="glyphicon glyphicon-arrow-right"></i></button>
                    <button type="button" class="btn btn-default edit-button"><i class="glyphicon glyphicon-edit"></i></button>
                    <button type="button" class="btn btn-danger delete-button"><i class="glyphicon glyphicon-remove"></i></button>
                </div>
            </h2>
        </div>
    {{else}}
        <div class="panel-heading">
            <h4>
                <i class="glyphicon glyphicon-folder-open" style="margin-right:10px;"></i>
                <span>{{content.title}}</span>
                <span>(Level {{content.level}})</span>
                <div class="float-right btn-group">
                    <button type="button" class="btn btn-default decrease-level-button"><i class="glyphicon glyphicon-arrow-left"></i></button>
                    <button type="button" class="btn btn-default increase-level-button"><i class="glyphicon glyphicon-arrow-right"></i></button>
                    <button type="button" class="btn btn-default edit-button"><i class="glyphicon glyphicon-edit"></i></button>
                    <button type="button" class="btn btn-danger delete-button"><i class="glyphicon glyphicon-remove"></i></button>
                </div>
            </h4>
        </div>
    {{/if}}
</template>

<template name="editChronicle_monster">
    {{#if expanded}}
        <div class="panel-heading">
            <h2>
                <i class="glyphicon glyphicon-eye-open" style="margin-right:10px;"></i>
                <span>{{content.Name}}</span>
                <div class="float-right btn-group">
                    <button type="button" class="btn btn-default edit-button"><i class="glyphicon glyphicon-edit"></i></button>
                    <button type="button" class="btn btn-danger delete-button"><i class="glyphicon glyphicon-remove"></i></button>
                </div>
            </h2>
        </div>
        <div class="panel-body">
            {{#with content}}
                {{> monsterStatBlock}}
            {{/with}}
        </div>
    {{else}}
        <div class="panel-heading">
            <h4>
                <i class="glyphicon glyphicon-eye-open" style="margin-right:10px;"></i>
                <span>{{content.Name}}</span>
                <div class="float-right btn-group">
                    <button type="button" class="btn btn-default edit-button"><i class="glyphicon glyphicon-edit"></i></button>
                    <button type="button" class="btn btn-danger delete-button"><i class="glyphicon glyphicon-remove"></i></button>
                </div>
            </h4>
        </div>
    {{/if}}
</template>

<template name="editChronicle_encounter">
    {{#if expanded}}
        <div class="panel-heading">
            <h2>
                <i class="glyphicon glyphicon-fire" style="margin-right:10px;"></i>
                <span>{{content.name}}</span>
                <div class="float-right btn-group">
                    <button type="button" class="btn btn-default edit-button"><i class="glyphicon glyphicon-edit"></i></button>
                    <button type="button" class="btn btn-danger delete-button"><i class="glyphicon glyphicon-remove"></i></button>
                </div>
            </h2>
        </div>
        <div class="panel-body">
            <h3>Monsters</h3>
            <ul>
                {{#each elements}}
                    <li>{{count}} {{monster.Name}}</li>
                {{/each}}
            </ul>
            <h3>NPCs</h3>
            <h3>Items</h3>
        </div>
    {{else}}
        <div class="panel-heading">
            <h4>
                <i class="glyphicon glyphicon-fire" style="margin-right:10px;"></i>
                <span>{{content.name}}</span>
                <div class="float-right btn-group">
                    <button type="button" class="btn btn-default edit-button"><i class="glyphicon glyphicon-edit"></i></button>
                    <button type="button" class="btn btn-danger delete-button"><i class="glyphicon glyphicon-remove"></i></button>
                </div>
            </h4>
        </div>
    {{/if}}
</template>

<template name="editChronicle_addMonsterModal">
    <div class="modal fade" id="add-monster-modal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Add Monster</h4>
                </div>
                <div class="modal-body">
                    <form>
                        {{> inputAutocomplete class="form-control" id="add-monster-search-input" name="query" placeholder="Search..." settings=autocompleteSettings }}
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
</template>